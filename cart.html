<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="viewport" content="initial-scale=1, maximum-scale=1">
      <title>SpaceShop</title>
      <meta name="keywords" content="">
      <meta name="description" content="">
      <meta name="author" content="">
      <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
      <link rel="stylesheet" type="text/css" href="css/style.css">
      <link rel="stylesheet" href="css/responsive.css">
      <link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css">
      <link rel="stylesheet" href="css/owl.carousel.min.css">
      <link rel="stylesheet" href="css/owl.theme.default.min.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css" media="screen">
      <style>
        body {
          padding-bottom: 50px;
       }
       .footer_section {
          margin-top: 0px;
       }
       </style>
    </head>
    <body onload="pageLoaded()">
       <!--header-->
<div class="header_section">
   <div class="container-fluid">
      <nav id="navbar" class="navbar navbar-expand-lg navbar-light bg-light" hidden>
         <div class="logo">
           <a href="index.html">
             <img src="images/logo1.png">
             <span id="username"></span>
           </a>
         </div>
         <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
           <span class="navbar-toggler-icon"></span>
         </button>
         <div class="collapse navbar-collapse" id="navbarNav">
           <ul class="navbar-nav ml-auto">
             <li class="nav-item active">
               <a class="nav-link" href="index.html">Home</a>
             </li>
             <li class="nav-item">
               <a class="nav-link" href="about.html">About Us</a>
             </li>
             <li class="nav-item">
               <a class="nav-link" href="tours.html">Tours</a>
             </li>
             <li class="nav-item">
               <a class="nav-link" href="items.html">Browse</a>
             </li>
             <li class="nav-item">
               <a class="nav-link" href="history.html">My Orders</a>
             </li>
             <li class="nav-item" id="logout" style="display: none;">
              <a class="nav-link" href="#" id="logout-link">Logout</a>
            </li>
             <li class="nav-item" id="login">
               <a class="nav-link" href="login.html">Login</a>
             </li>
             <li class="nav-item">
               <a class="nav-link" href="cart.html">
                 <i class="fa fa-rocket" style="color:#ad8fb9;font-size: 32px;" aria-hidden="true"></i>
                 <span class="cart-badge" >0</span>
               </a>
             </li>
           </ul>
         </div>
       </nav>
   </div>
</div>
<!--header-->
<!-- CartBody -->
<div class="login_section layout_padding">
  <div class="container">
    <div class="row">
      <div class="col-md-6 offset-md-3">
        <div class="about_title">Cart</div>
        <!-- CartBody -->
        <table>
          <thead>
            <tr>
              <th>   Item Name</th>
              <th>        Item Price</th>
              <th>       Total</th>
            </tr>
          </thead>
          <tbody id="cartItemsTableBody"></tbody>
        </table>
      </div>
    </div>
  </div>
</div>
      <!-- footer -->
      <div class="footer_section margin_top90">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-sm-6">
                    <h3 class="useful_text">About</h3>
                    <p class="footer_text">Explore the wonders of space through captivating tours at SpaceShop, where you can embark on unforgettable journeys and indulge in a remarkable gift shop filled with celestial treasures.</p>
                </div>
                <div class="col-lg-3 col-sm-6">
                    <h1 class="useful_text">Contact Us</h1>
                    <div class="location_text">
                        <ul>
                            <li>
                                <a href="https://www.google.com/maps?opi=89978449&rlz=1C1GCEA_enIL1022IL1022&lqi=ChxrZW5uZWR5IHNwYWNlIGNlbnRlciBhZGRyZXNzIgVIAYgBAUjIrwhaIhAAEAEQAhgAGAEYAiIUa2VubmVkeSBzcGFjZSBjZW50ZXKSARNoaXN0b3JpY2FsX2xhbmRtYXJrqgE9EAEyHxABIhsrypXXkBNCR7BMHHQ44m4nN01SgjNqRXgmqM4yGBACIhRrZW5uZWR5IHNwYWNlIGNlbnRlcg&vet=12ahUKEwiOsbyFhMb_AhVFxQIHHbhTAasQ1YkKegQIFBAB..i&cs=1&um=1&ie=UTF-8&fb=1&gl=il&sa=X&geocode=Kf3GZaOVS-eIMd1p-EbyOXOL&daddr=Florida+32899,+United+States">
                                    <i class="fa fa-map-marker" aria-hidden="true"></i><span class="padding_left_50">   Address: Kennedy Space Center, Florida 32899, United States.</span>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <i class="fa fa-phone" aria-hidden="true"></i><span class="padding_left_10">    Call: +1 321-867-5000</span>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <i class="fa fa-envelope" aria-hidden="true"></i><span class="padding_left_10">Email: KennedySpaceShop@gmail.com</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
      <!-- footer -->
      <!-- copyright -->
      <div class="copyright_section">
         <div class="container">
            <p class="copyright_text">2023 All Rights Reserved. Design by <a href="https://github.com/EmanuelTurko/">E.Turko & H.Miterany</a></p>
         </div>
      </div>
      <!-- copyright-->
      <!-- Javascript-->
      <script src="js/jquery.min.js"></script>
      <script src="js/popper.min.js"></script>
      <script src="js/bootstrap.bundle.min.js"></script>
      <script src="js/jquery-3.0.0.min.js"></script>
      <script src="js/plugin.js"></script>
      <!-- sidebar -->
      <script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
      <script src="js/custom.js"></script>   
      <script src="js/User.js"></script>  
      <script src="js/navbar.js"></script>
      <script src="js/logout.js"></script>
      <script src="js/cart.js"></script>
      <script>
        document.addEventListener('DOMContentLoaded', () => {
          const cartItemsTableBody = document.getElementById('cartItemsTableBody');
      
          // Retrieve the cart items from localStorage
          const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
      
          // Create a map to store the total quantity of each item
          const itemQuantityMap = new Map();
      
          // Iterate over the cart items and update the item quantity map
          cartItems.forEach(item => {
            const { itemId } = item;
            const quantity = itemQuantityMap.get(itemId) || 0;
            itemQuantityMap.set(itemId, quantity + 1);
          });
      
          // Iterate over the item quantity map and populate the table rows
          itemQuantityMap.forEach((quantity, itemId) => {
            const selectedItem = cartItems.find(item => item.itemId === itemId);
      
            // Create a table row for the item
            const row = document.createElement('tr');
      
            // Create table cells for the item details
            const imageCell = document.createElement('td');
            const image = document.createElement('img');
      
            if (itemId === 'item1') {
              image.src = 'images/img1.jpg'; // Set the image source for item1
            } else {
              image.src = 'images/default.jpg'; // Set a default image source for other items
            }
      
            image.alt = selectedItem.name; // Set the alt attribute to the item name
            image.style.width = '50px'; // Adjust the width as needed
            imageCell.appendChild(image);
            row.appendChild(imageCell);
      
            const nameCell = document.createElement('td');
            nameCell.textContent = selectedItem.name;
      
            const priceCell = document.createElement('td');
            priceCell.textContent = selectedItem.price;
      
            const totalAmountCell = document.createElement('td');
            totalAmountCell.textContent = (selectedItem.price * quantity).toFixed(2);
      
            // Append the cells to the row
            row.appendChild(nameCell);
            row.appendChild(priceCell);
            row.appendChild(totalAmountCell);
      
            // Append the row to the table body
            cartItemsTableBody.appendChild(row);
          });
      
          // Calculate the total amount
          let totalAmount = 0;
          const totalAmountCells = document.querySelectorAll('#cartItemsTableBody td:last-child');
          totalAmountCells.forEach(cell => {
            totalAmount += parseFloat(cell.textContent);
          });
      
          // Create a row for the total amount
          const totalRow = document.createElement('tr');
          const totalLabelCell = document.createElement('td');
          totalLabelCell.textContent = 'Total Amount to Pay:';
          totalLabelCell.colSpan = 3; // Adjust the colspan to accommodate the additional image column
          const totalAmountCell = document.createElement('td');
          totalAmountCell.textContent = totalAmount.toFixed(2);
          totalRow.appendChild(totalLabelCell);
          totalRow.appendChild(totalAmountCell);
      
          // Append the total row to the table body
          cartItemsTableBody.appendChild(totalRow);
        });
      </script>
   </body>
</html>